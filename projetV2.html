<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interventions</title>
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
    <link rel="stylesheet" href="addFormStyle.css">
    <link rel="stylesheet" href="jquery-ui-themes-1.12.1/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
<h1 class="display-4">Interventions</h1>
<div id="root">
    <nbrintervention class="textColor"></nbrintervention>
    <interventionlist ref="intervList" :interventions="interventions"></interventionlist>
    <pagination></pagination>
    <editinterv ref="editInterv" :interventions="interventions"></editinterv>
</div>


<script src="vue.js"></script>
<script src="vuex.js"></script>
<script src="moment.js"></script>
<script>

    Vue.use(Vuex)

    const store = new Vuex.Store({
        state: {
            select: 0,
            totalInterv: 0,
            currentPage: 1,
            startSlice: 0,
            changePage: false,
            prev: false,
            next: false,
            index: 0,
            idInterv: 0,
            tabSearch: [],
            searchColumn: false,
            stockDeleteId: [],
            confirmDeleteInterv: false,
            idInterv: 0,
            boolEditInterv: false,
            buttonAddInterv: false
        },
        getters: {
            getterSelect: state => {
                return state.select
            },
            getterTotalInterv: state => {
                return state.totalInterv
            },
            getterCurrentPage: state => {
                return state.currentPage
            },
            getterStartSlice: state => {
                return state.startSlice
            },
            getterChangePage: state => {
                return state.changePage
            },
            getterPrev: state => {
                return state.prev
            },
            getterNext: state => {
                return state.next
            },
            getterIndex: state => {
                return state.index
            },
            getterIdInterv: state => {
                return state.idInterv
            },
            getterTabSearch: state => {
                return state.tabSearch
            },
            getterSearchColumn: state => {
                return state.searchColumn
            },
            getterStockDeleteId: state => {
                return state.stockDeleteId
            },
            getterDisplayDelete: state => {
                return state.confirmDeleteInterv
            },
            getterIdInterv: state => {
                return state.idInterv
            },
            getterBoolEditInterv: state => {
                return state.boolEditInterv
            },
            getterButtonAddInterv: state => {
                return state.buttonAddInterv
            }
        },
        mutations: {
            editSelect: (state, newValue) => {
                state.select = newValue
            },
            sendTotalPages: (state, newValue) => {
                state.totalInterv = newValue
            },
            editCurrentPage: (state, newValue) => {
                state.currentPage = newValue
            },
            editStartSlice: (state, newValue) => {
                state.startSlice = newValue
            },
            editChangePage: (state, newValue) => {
                state.changePage = newValue
            },
            editPrev: (state, newValue) => {
                state.prev = newValue
            },
            editNext: (state, newValue) => {
                state.next = newValue
            },
            editIndex: (state, newValue) => {
                state.index = newValue
            },
            editIdInterv: (state, newValue) => {
                state.idInterv = newValue
            },
            editTabSearch: (state, newValue) => {
                state.tabSearch = newValue
            },
            editSearchColumn: (state, newValue) => {
                state.searchColumn = newValue
            },
            editStockDeleteId: (state, newValue) => {
                state.stockDeleteId = newValue
            },
            editDisplayDelete: (state, newValue) => {
                state.confirmDeleteInterv = newValue
            },
            editIdInterv: (state, newValue) => {
                state.idInterv = newValue
            },
            editBoolEditInterv: (state, newValue) => {
                state.boolEditInterv = newValue
            },
            editButtonAddInterv: (state, newValue) => {
                state.buttonAddInterv = newValue
            }
        }
    })


    Vue.component('nbrintervention', {
        data() {
            return {
                value: 10,
            }
        },
        methods: {
            getSelect(){
                store.commit('editStartSlice', 0) // select value change => init tab slice(0, selectVal)
                store.commit('editCurrentPage', 1) // select value change => init current page = 1
                store.commit('editSelect', parseInt(this.value)) // save select value AND typeof(this.value) = string
                store.commit('editChangePage', false) // select value change => init pagination => classic prev-- / next++
            }
        },
        template: `
            <div>
                <select v-model="value" @change="getSelect()">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                </select>
            </div>
        `,
    })


    Vue.component('pagination', {
        data() {
            return {
                nbrPagination: 0,
                myCurrentPage: 1,
            }
        },
        computed: {
            nbrPages() { // nbr pagination
                let itemsPerPage = store.getters.getterSelect,
                    totalInterv = store.getters.getterTotalInterv,
                    searchColumn = store.getters.getterSearchColumn,
                    tabSearch =  store.getters.getterTabSearch

                itemsPerPage === 0 ? itemsPerPage = 10 : itemsPerPage

                let tabLength = ''
                if(searchColumn === true){
                    tabLength = tabSearch.length
                    this.nbrPagination = Math.ceil(tabLength / itemsPerPage)
                }else{
                    tabLength = totalInterv
                    this.nbrPagination = Math.ceil(totalInterv / itemsPerPage)
                }

                    totalInterv = store.getters.getterTotalInterv

                itemsPerPage === 0 ? itemsPerPage = 10 : itemsPerPage

                this.nbrPagination = Math.ceil(totalInterv / itemsPerPage)
                this.myCurrentPage = 1

                return this.nbrPagination
            },
        },
        methods: {
            next(){
                let curPage = store.getters.getterCurrentPage,
                    next = store.getters.getterNext,
                    index = store.getters.getterIndex,
                    bolChangePage = store.getters.getterChangePage

                if(bolChangePage === true){ // pagination selected => next with index value
                    next = true
                    store.commit('editNext', next)

                    if(this.myCurrentPage < this.nbrPagination){
                        index += 1
                        this.myCurrentPage = index + 1
                        store.commit('editIndex', index)
                        store.commit('editCurrentPage', this.myCurrentPage)
                    }
                }
                else{ // classic next => current page + 1
                    curPage === 1 ? this.myCurrentPage = 1 : ''
                    this.myCurrentPage < this.nbrPagination ? this.myCurrentPage++ : ''
                    curPage = this.myCurrentPage

                    store.commit('editCurrentPage', curPage)
                }
            },
            prev(){
                let curPage = store.getters.getterCurrentPage,
                    prev = store.getters.getterPrev,
                    index = store.getters.getterIndex,
                    bolChangePage = store.getters.getterChangePage

                if(bolChangePage === true){ // pagination selected => prev with index value
                    if(this.myCurrentPage > 1){

                        prev = true
                        index -= 1
                        this.myCurrentPage = index + 1

                        store.commit('editIndex', index)
                        store.commit('editCurrentPage', this.myCurrentPage)
                        store.commit('editPrev', prev)
                    }
                }else{ // classic prev => current page - 1
                    this.myCurrentPage > 1 ? this.myCurrentPage-- : ''
                    curPage = this.myCurrentPage

                    store.commit('editCurrentPage', curPage)
                }
            },
            goTo(index){ // pagination selected
                this.myCurrentPage = index + 1

                store.commit('editIndex', index)
                store.commit('editCurrentPage', index)
                store.commit('editChangePage', true)
            },
            displayPagination(){
                let itemsPerPage = store.getters.getterSelect,
                    totalInterv = store.getters.getterTotalInterv

                return itemsPerPage !== totalInterv
            }
        },
        template: `
        <div id="pagination" v-if="displayPagination()">
            <a href="#" @click="prev()">&laquo;</a>
                <span v-for="(pageNumber, index) in nbrPages">
                    <a v-if="index === (myCurrentPage - 1)" class="active">{{pageNumber}}</a>
                    <a v-else @click="goTo(index)">{{pageNumber}}</a>
                </span>
            <a href="#" @click="next()">&raquo;</a>
        </div>
        `,
    })


    Vue.component('interventionlist', {
        data() {
            return {
                curPage: 1,
                filters: false,
                searchInTab: '',
                searchErrorMsg: false,
                activeOrder: 0,
                searchInputsNames: [
                    'Numéro',
                    'Type',
                    'Intervenant',
                    'Client',
                    'Etat',
                    'Date Début',
                    'Date Fin',
                    'Créateur'
                ],
                searchInColumn: [],
                boolArrow: [
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false
                ],
                confirmDeleteInterventions: false,
                clickDelete: false,
                deleteIdInterv: '',
                displayDeleteInterv: false,
                count: 0,
                displayButtonAddInterv: true
            }
        },
        props: [
            'interventions',
        ],
        computed: {
            filterBy() {
                let totalInterventions = this.interventions.length,
                    getCurPage = store.getters.getterCurrentPage,
                    selectVal = store.getters.getterSelect,
                    startSlice = store.getters.getterStartSlice,
                    boolChangePage = store.getters.getterChangePage,
                    index = store.getters.getterIndex,
                    prev = store.getters.getterPrev,
                    next = store.getters.getterNext,
                    tabSearch = store.getters.getterTabSearch,
                    searchColumn = store.getters.getterSearchColumn,
                    deleteIntervId = store.getters.getterStockDeleteId,
                    confirmDisplayButton = store.getters.getterDisplayDelete


                //recherche global non vide et recherche par colonne non vide ? + pagination.

                getCurPage === 1 ? this.curPage = 1 : ''
                selectVal === 0 ? selectVal = 10 : 0
                store.commit('sendTotalPages', totalInterventions)

                //display confirm button 'delete interv'
                confirmDisplayButton === true ? this.confirmDeleteInterventions = true : this.confirmDeleteInterventions = false

                if(deleteIntervId.length !== 0 && this.clickDelete === true) {
                    for(let i = 0; i < deleteIntervId.length; i++){
                        for(let y = 0; y < this.interventions.length; y++){
                            if(deleteIntervId[i] === this.interventions[y].id){
                                this.interventions.splice(y, 1)
                            }
                        }
                    }
                    this.clickDelete = false
                    this.confirmDeleteInterventions = false
                    store.commit('editDisplayDelete', false)
                    store.commit('editStockDeleteId', [])
                    store.commit('editIndex', 0)
                    store.commit('editCurrentPage', 1)
                }


                if(searchColumn === true){

                    return tabSearch.slice(0, selectVal)

                }
                if (this.searchInTab === 0 || !this.searchInTab) { //global search empty -> classic tab

                    this.searchErrorMsg = false

                    if (boolChangePage === true) { //select page ? => true
                        if (next === true) { // next page

                            startTab = index * selectVal
                            store.commit('editNext', false)

                            return this.interventions.slice(startTab, (startTab + selectVal))
                        } else if (prev === true) { // prev page

                            startTab = getCurPage * selectVal
                            store.commit('editPrev', false)

                            return this.interventions.slice((startTab - selectVal), startTab)
                        } else {
                            startTab = getCurPage * selectVal

                            return this.interventions.slice(startTab, (startTab + selectVal))
                        }
                    } else { //select page ? => false => classic pagination => nextPage++ / prevPage--
                        if (getCurPage > this.curPage) {  // next page

                            startSlice += selectVal
                            store.commit('editStartSlice', startSlice)
                            this.curPage = getCurPage

                            return this.interventions.slice(startSlice, (startSlice + selectVal))
                        } else if (getCurPage < this.curPage) { // prev page

                            startSlice -= selectVal
                            store.commit('editStartSlice', startSlice)
                            this.curPage = getCurPage

                            return this.interventions.slice(startSlice, startSlice + selectVal)
                        }else if(getCurPage === this.curPage && getCurPage !== 1){

                            startTab = (getCurPage - 1) * selectVal

                            return this.interventions.slice(startTab, (startTab + selectVal))
                        }else { // init tab => slice(0,10)
                            store.commit('editStartSlice', 0)
                            return this.interventions.slice(0, selectVal)
                        }
                    }
                }else {
                    let tabSearchInterv = []

                    //recherche global à faire
                    //console.log(this.searchInTab)
                    //fonctionne que pour intervention ici
                    for(let i = 0; i < this.interventions.length; i++){

                        let search = this.interventions[i].intervenant.toLowerCase().indexOf(this.searchInTab)

                        if(search !== -1){

                            search = this.interventions[i].intervenant.toLowerCase().indexOf(this.searchInTab, search + 1)

                            tabSearchInterv.push(this.interventions[i])
                        }
                    }
                    tabSearchInterv.length === 0 ? this.searchErrorMsg = true : this.searchErrorMsg = false

                    return tabSearchInterv.slice(0, selectVal)
                }
            },
        },
        methods:{
            displayFilters(){
                return this.filters = true
            },
            returnColumnNames(index) {

                let columnNames = ''

                switch(index){
                    case 0: columnNames = 'id'
                        break
                    case 1: columnNames = 'type'
                        break
                    case 2: columnNames = 'intervenant'
                        break
                    case 3: columnNames = 'client'
                        break
                    case 4: columnNames = 'etat'
                        break
                    case 5: columnNames = 'date_debut'
                        break
                    case 6: columnNames = 'date_fin'
                        break
                    case 7: columnNames = 'createur'
                        break
                    default: columnNames = 'id'
                }

                return columnNames
            },
            searchByColumns(index){

                let input = this.searchInColumn[index],
                    columnNames = this.returnColumnNames(index),
                    tabSearch = store.getters.getterTabSearch,
                    tabResult = []

                if(input.trim().length === 0){
                    console.log('la')
                    //store.commit('editTabSearch', this.interventions)
                    return tabSearch
    //                    for(var key in this.searchInColumn) {
    //                        //this.searchByColumns(key)
    //                        //push index input not empty ?
    //                    }
                }

                this.interventions.map(function(interv){

                    if(columnNames === 'client'){

                        let prenom =  interv[columnNames][0].prenom.toLowerCase() + ' ' +  interv[columnNames][0].nom.toLowerCase()

                        var search = prenom.indexOf(input)

                        search !== -1 ? tabResult.push(interv) : ''

                    }else if(columnNames === 'id'){

                        if (interv[columnNames] === parseInt(input)){
                            tabResult.push(interv)
                        }
                    }else{

                        var search = interv[columnNames].toLowerCase().indexOf(input)

                        search !== -1 ? tabResult.push(interv) : ''
                    }
                })

                tabResult.length === 0 ? this.searchErrorMsg = true : this.searchErrorMsg = false

                store.commit('editTabSearch', tabResult)

                for(let i = 0; i < this.searchInColumn.length; i++){
                    this.searchInColumn[i].length === 0 ? store.commit('editSearchColumn', false) : store.commit('editSearchColumn', true)
                }

            },
            orderByColumn(index){ //index columns

                let columnNames = this.returnColumnNames(index)

                this.boolArrow[index] = !this.boolArrow[index]

                let bool = this.boolArrow[index]


                this.interventions.sort(function(a, b){

                    if(columnNames === 'date_debut' || columnNames === 'date_fin') {

                        let dateA = moment(a[columnNames], "DD-MM-YYYY").format("YYYY-MM-DD"),
                            dateB = moment(b[columnNames], "DD-MM-YYYY").format("YYYY-MM-DD")

                        if(bool === true){
                            return new Date(dateA) - new Date(dateB)
                        }else{
                            return new Date(dateB) - new Date(dateA)
                        }

                    }else{

                        if(columnNames === 'client'){
                            var nameA = a['client'][0].nom,
                                nameB = b['client'][0].nom
                        }else{
                            var nameA = a[columnNames],
                                nameB = b[columnNames]
                        }

                        if(bool === true){
                            if (nameA < nameB)
                                return -1
                            if (nameA > nameB)
                                return 1
                            return 0
                        }else{
                            if (nameA < nameB)
                                return 1
                            if (nameA > nameB)
                                return -1
                            return 0
                        }
                    }
                })
            },
            confirmDeleteInterv(){
                return this.clickDelete = true
            },
            catchRemove(){

                this.displayDeleteInterv = true
                this.count++

                if(this.count === 2){
                    let idInterv = this.deleteIdInterv

                    if(idInterv !== ""){

                        if (window.confirm("Êtes vous sûr de vouloir supprimer l'intervention " + idInterv + " ?")){
                            if (idInterv > 0 && (idInterv <= this.interventions.length)){
                                for(let i = 0; i < this.interventions.length; i++){
                                    if (this.interventions[i].id === parseInt(idInterv)){
                                        if(this.interventions.splice(i, 1)){
                                            alert("L'intervention a bien été supprimée")
                                        }else {
                                            alert("Une erreur s'est produite, veuillez réessayer")
                                        }
                                    }
                                }
                            }else {
                                alert("Merci de choisir un numéro d'intervention existant!")
                            }
                        }
                    }else {
                        alert('Merci de remplir les champs requis!')
                    }
                    this.count = 0
                    this.displayDeleteInterv = false
                }
            },
            displayAddForm(){
                store.commit('editButtonAddInterv', true)
                vm.$refs.editInterv.initForm()
            },                                          //premiere lettre maj
            editThisId(id, getId){ if(getId !== null){ return this.interventions[id].id = getId } },
            editThisType(id, getType){ if(getType !== null){ return this.interventions[id].type = getType.charAt(0).toUpperCase()+getType.substr(1).toLowerCase() } },
            editIntervenant(id, getIntervenant){ if(getIntervenant !== null){ return this.interventions[id].intervenant = getIntervenant.charAt(0).toUpperCase()+getIntervenant.substr(1).toLowerCase() } },
            editClient(id, getClient){

                if(getClient !== null){

                    let prenom = getClient.match(/^[a-z]+[ ]/g).join(", ")
                    this.interventions[id].client[0].prenom = prenom.charAt(0).toUpperCase()+prenom.substr(1).toLowerCase()

                    let nom = getClient.match(/[ ][a-z]+/g).join(", ")
                    this.interventions[id].client[0].nom = nom.charAt(0).toUpperCase()+nom.substr(1).toLowerCase()
                }
            },
            editEtat(id, getEtat){ if(getEtat !== null){ return this.interventions[id].etat = getEtat.charAt(0).toUpperCase()+getEtat.substr(1).toLowerCase() } },
            editDateDebut(id, getDateDebut){ if(getDateDebut !== null){ return this.interventions[id].date_debut = getDateDebut } },
            editDateFin(id, getDateFin){ if(getDateFin !== null){ return this.interventions[id].date_fin = getDateFin } },
            editCreateur(id, getCreateur){ if(getCreateur !== null){ return this.interventions[id].createur = getCreateur.charAt(0).toUpperCase()+getCreateur.substr(1).toLowerCase() } }
            },
        template: `
        <div>
            <div>
                <input type="text" placeholder="search" v-model="searchInTab">
                <div>
                    <button @click="displayFilters()" class="btn btn-secondary">Filtres</button>
                </div>
                <div>
                    <input type="text"
                    placeholder="Numéro de l'intervention"
                    v-model="deleteIdInterv"
                    :class="[displayDeleteInterv ? '' : 'displayNone']">
                    <input type="submit" class="btn btn-secondary" value="Supprimer une intervention" @click="catchRemove()">
                </div>
                <div>
                    <button @click="displayAddForm()" :class="['btn btn-secondary', displayButtonAddInterv ? '' : 'displayNone']">Ajouter une intervention</button>
                </div>
            </div>
            <table>
                <tr>
                <th>Suppression</th>
                    <th :class="[filters ? 'displayNone' : '']" v-for="columnName, index in searchInputsNames">{{columnName}}
                        <span @click="orderByColumn(index)" :class="['arrow', boolArrow[index] ? 'orderAsc' : 'orderDsc']"></span>
                    </th>
                    <th :class="[filters ? '' : 'displayNone']" v-for="(columnName, index) in searchInputsNames">
                        <input
                        type="text"
                        :ref="returnColumnNames(index)"
                        v-on:input="searchByColumns(index)"
                        :placeholder="columnName"
                        v-model="searchInColumn[index]"/>
                    </th>
                </tr>

                <intervention v-for="(interv, index) in filterBy"
                 :id="interv.id"
                 :type="interv.type"
                 :intervenant="interv.intervenant"
                 :client="interv.client"
                 :etat="interv.etat"
                 :date_debut="interv.date_debut"
                 :date_fin="interv.date_fin"
                 :createur="interv.createur"
                 :key="index">
                </intervention>
                <p :class="[searchErrorMsg ? 'searchError' : 'displayNone']">Aucun résultat pour votre recherche</p>
                <button @click="confirmDeleteInterv()" :class="['btn btn-secondary', confirmDeleteInterventions ? 'deleteInterv' : 'displayNone']">Supprimer les interventions</button>

            </table>
        </div>`,
    })

    Vue.component('intervention', {
        props: [
            'id',
            'type',
            'intervenant',
            'client',
            'etat',
            'date_debut',
            'date_fin',
            'createur'
        ],
        data() {
            return {
                checkedInterv: [],
            }
        },
        template: `
        <tr>
            <input type="checkbox" @click="selectCheckbox(id)" v-model="checkedInterv[id]">
            <td @dblclick="editId(id)">{{id}}</td>
            <td @dblclick="editType(id)">{{type}}</td>
            <td @dblclick="editIntervenant(id)">{{intervenant}}</td>
            <td @dblclick="editClient(id)">{{client[0].prenom}} {{client[0].nom}}</td>
            <td @dblclick="editEtat(id)">{{etat}}</td>
            <td @dblclick="editDateDebut(id)">{{date_debut}}</td>
            <td @dblclick="editDateFin(id)">{{date_fin}}</td>
            <td @dblclick="editCreateur(id)">{{createur}}</td>
            <td><button @click="eventDetails(id)" class="btn btn-secondary">Voir</button></td>
        </tr>`,
        methods:{
            editId(id){
                let getId = prompt('Entrez votre nouvelle valeur pour l\'id :')
                if (getId !== null) {console.log('t'); vm.$refs.intervList.editThisId(id - 1, getId) }
            },
            editType(id){
                let getType = prompt('Entrez votre nouvelle valeur pour le type :')
                if (getType !== null || getType !== '') { vm.$refs.intervList.editThisType(id - 1, getType) }
            },
            editIntervenant(id){
                let getIntervenant = prompt('Entrez votre nouvelle valeur pour l\'intervenant :')
                if (getIntervenant !== null || getIntervenant !== '') { vm.$refs.intervList.editIntervenant(id - 1, getIntervenant) }
            },
            editClient(id){
                let getClient = prompt('Entrez le nouveau prénom + nom du client :')
                if (getClient !== null || getClient !== '') { vm.$refs.intervList.editClient(id - 1, getClient) } //prenom+nom
            },
            editEtat(id){
                let getEtat = prompt('Entrez votre nouvelle valeur pour l\'état :')
                if (getEtat !== null || getEtat !== '') { vm.$refs.intervList.editEtat(id - 1, getEtat) }
            },
            editDateDebut(id){
                let getDateDebut = prompt('Entrez votre nouvelle valeur pour la date de début :')
                if (getDateDebut !== null || getDateDebut !== '') { vm.$refs.intervList.editDateDebut(id - 1, getDateDebut) }
            },
            editDateFin(id){
                let getDateFin = prompt('Entrez votre nouvelle valeur pour la date de fin :')
                if (getDateFin !== null || getDateFin !== '') { vm.$refs.intervList.editDateFin(id - 1, getDateFin) }
            },
            editCreateur(id){
                let getCreateur = prompt('Entrez votre nouvelle valeur pour le créateur :')
                if (getCreateur !== null || getCreateur !== '') { vm.$refs.intervList.editCreateur(id - 1, getCreateur) }
            },
            eventDetails(id){
                store.commit('editIdInterv', id)
                store.commit('editBoolEditInterv', true)
                vm.$refs.editInterv.initForm()
            },
            selectCheckbox(id){

                let stockId = store.getters.getterStockDeleteId

                if(stockId.includes(id)){
                    let index = stockId.indexOf(id)
                    if(index > -1){
                        stockId.splice(index, 1)
                    }
                }else{
                    stockId.push(id)
                }

                store.commit('editStockDeleteId', stockId)
                stockId.length !== 0 ? store.commit('editDisplayDelete', true) : store.commit('editDisplayDelete', false)
            }
        }
    })

    Vue.component('editinterv', {
        props: [
            'interventions',
            'id'
        ],
        data() {
            return {
                etat: '',
                createur: '',
                type: '',
                intervenant: '',
                client: {
                    nom: '',
                    prenom: '',
                    adresse1: '',
                    adresse2: '',
                    cp: '',
                    ville: '',
                    telephone: '',
                    mail: '',
                },
                date_debut: '',
                heure_debut: '',
                date_fin: '',
                heure_fin: '',
                produit: {
                    ref: '',
                    qte: '',
                    libelle: '',
                },
                description: '',
                commentaires: '',
                displayForm: false
            }
        },
        template: `
        <form action="" method="post" :class="[displayForm ? 'editForm' : 'displayNone']" @submit.prevent="catchModifDetails">
                <div id="blockPrincipale">
                    <h4>Informations principales</h4>
                    <div id="intervInfoDetails">
                        <select name="type" v-model="type">
                            <option>Maintenance</option>
                            <option>Installation</option>
                            <option>Désinstallation</option>
                        </select>
                        <input type="text" v-model="intervenant"/>
                        <select name="type" v-model="etat">
                            <option>En cours</option>
                            <option>Terminé</option>
                        </select>
                    </div>
                </div>

                <div id="blockClient">
                    <h4>Client</h4>
                    <div id="coordClientDetails">
                        <input type="text" v-model="client.nom" />
                        <input type="text" v-model="client.prenom" />
                        <input type="text" v-model="client.adresse1" />
                        <input type="text" v-model="client.adresse2"/>
                        <input type="text" v-model="client.cp" />
                        <input type="text" v-model="client.ville" />
                        <input type="text" v-model="client.telephone" />
                        <input type="text" v-model="client.mail"/>
                    </div>
               </div>

                <div id="blockDateHeure">
                    <h4>Dates et heures</h4>
                    <div id="datesDetails">
                        <input type="text" v-model="date_debut"/>
                        <input type="text" v-model="heure_debut"/>
                        <input type="text" v-model="date_fin" />
                        <input type="text" v-model="heure_fin"/>
                    </div>
                </div>

                <div id="createur">
                    <input type="text" v-model="createur" />{{id}}
                </div>

                <div id="blockProduit">
                    <h4>Produit</h4>
                    <div id="refProduitDetails">
                        <input type="text" v-model="produit.ref"/>
                        <input type="text" v-model="produit.qte"/>
                        <input type="text" v-model="produit.libelle"/>
                    </div>
                </div>

                <div id="blockCommentDescript">
                    <h4>Descriptions et commentaires</h4>
                    <div id="textareasDetails">
                        <textarea name="description" cols="30" rows="10" v-model="description"></textarea>
                        <textarea name="commentaires" cols="30" rows="10" v-model="commentaires"></textarea>
                    </div>
                </div>

                <input type="submit" class="btn btn-secondary" id="enregDetailsBtn" value="Enregistrer"/>
            </form>
        </div>
        `,
        methods: {
            initForm(){
                let id = store.getters.getterIdInterv,
                    boolEditInterv = store.getters.getterBoolEditInterv,
                    getId = id - 1


                if(boolEditInterv === true){

                    this.displayForm = true

                    this.type = this.interventions[getId].type
                    this.etat = this.interventions[getId].etat
                    this.createur = this.interventions[getId].createur
                    this.intervenant = this.interventions[getId].intervenant
                    this.description = this.interventions[getId].description
                    this.commentaires = this.interventions[getId].commentaires
                    this.date_debut = this.interventions[getId].date_debut
                    this.heure_debut = this.interventions[getId].heure_debut
                    this.date_fin = this.interventions[getId].date_fin
                    this.heure_fin = this.interventions[getId].heure_fin

                    this.client.nom = this.interventions[getId].client[0].nom
                    this.client.prenom = this.interventions[getId].client[0].prenom
                    this.client.adresse1 = this.interventions[getId].client[0].adresse1
                    this.client.adresse2 = this.interventions[getId].client[0].adresse2
                    this.client.cp = this.interventions[getId].client[0].cp
                    this.client.ville = this.interventions[getId].client[0].ville
                    this.client.telephone = this.interventions[getId].client[0].telephone
                    this.client.mail = this.interventions[getId].client[0].mail

                    this.produit.ref = this.interventions[getId].produit[0].ref
                    this.produit.qte = this.interventions[getId].produit[0].qte
                    this.produit.libelle = this.interventions[getId].produit[0].libelle

                }else{

                    this.displayForm = true

                    this.type = ''
                    this.etat = ''
                    this.createur = ''
                    this.intervenant = ''
                    this.description = ''
                    this.commentaires = ''
                    this.date_debut = ''
                    this.heure_debut = ''
                    this.date_fin = ''
                    this.heure_fin = ''

                    this.client.nom = ''
                    this.client.prenom = ''
                    this.client.adresse1 = ''
                    this.client.adresse2 = ''
                    this.client.cp = ''
                    this.client.ville = ''
                    this.client.telephone = ''
                    this.client.mail = ''

                    this.produit.ref = ''
                    this.produit.qte = ''
                    this.produit.libelle = ''
                }
            },
            catchModifDetails(){

                let id = store.getters.getterIdInterv,
                    boolEditInterv = store.getters.getterBoolEditInterv,
                    getId = id - 1

                this.displayForm = false

                if(boolEditInterv === true){
                //save edit interv
                    this.interventions[getId].createur =  this.createur
                    this.interventions[getId].intervenant = this.intervenant
                    this.interventions[getId].type = this.type
                    this.interventions[getId].etat = this.etat
                    this.interventions[getId].description = this.description
                    this.interventions[getId].commentaires = this.commentaires
                    this.interventions[getId].client[0].nom = this.client.nom
                    this.interventions[getId].client[0].prenom = this.client.prenom
                    this.interventions[getId].client[0].adresse1 = this.client.adresse1
                    this.interventions[getId].client[0].adresse2 = this.client.adresse2
                    this.interventions[getId].client[0].cp = this.client.cp
                    this.interventions[getId].client[0].ville = this.client.ville
                    this.interventions[getId].client[0].telephone = this.client.telephone
                    this.interventions[getId].client[0].mail =    this.client.mail
                    this.interventions[getId].client[0].cp = this.client.cp
                    this.interventions[getId].date_debut = this.date_debut
                    this.interventions[getId].heure_debut = this.heure_debut
                    this.interventions[getId].date_fin = this.date_fin
                    this.interventions[getId].heure_fin = this.heure_fin
                    this.interventions[getId].produit[0].ref = this.produit.ref
                    this.interventions[getId].produit[0].qte = this.produit.qte
                    this.interventions[getId].produit[0].libelle = this.produit.libelle

                }else{
                    //add one interv
                    this.catchSubmit()
                }

                store.commit('editBoolEditInterv', false)
            },
            catchSubmit(){
                if (this.type === '' || this.intervenant === ''
                    || this.date_debut === '' || this.date_fin === '' ||
                    this.createur === '' || this.client.nom === '' ||
                    this.client.prenom === '' || this.client.adresse1 === '' ||
                    this.client.cp === '' || this.client.ville === '' || this.client.telephone === ''){

                    alert('Merci de remplir tous les champs.')
                    this.displayForm = true
                }else{

                    let idLastInterv = this.interventions.length - 1,
                        id = this.interventions[idLastInterv].id

                    this.interventions.push(
                        {
                            id: id+1,
                            type: this.type,
                            intervenant: this.intervenant,
                            etat: 'A faire',
                            date_debut: this.date_debut,
                            heure_debut: this.heure_debut,
                            date_fin: this.date_fin,
                            heure_fin: this.heure_fin,
                            createur: this.createur,
                            description: this.description,
                            commentaires: this.commentaires,
                            produit: [
                                {
                                    ref: this.produit.ref,
                                    qte: this.produit.qte,
                                    libelle: this.produit.libelle,
                                }
                            ],
                            client: [
                                {
                                    nom: this.client.nom,
                                    prenom: this.client.prenom,
                                    adresse1: this.client.adresse1,
                                    adresse2: this.client.adresse2,
                                    cp: this.client.cp,
                                    ville: this.client.ville,
                                    telephone: this.client.telephone,
                                    mail: this.client.mail
                                }
                            ]
                        }
                    )
                    alert("L'intervention a bien été ajoutée!")
                    this.displayForm = false
                    store.commit('editButtonAddInterv', false)
                }
            }
        }
    })

    var vm = new Vue({
        el: '#root',
        data: {
            type: '',
            intervenant: '',
            etat: '',
            date_debut: '',
            heure_debut: '',
            date_fin: '',
            heure_fin: '',
            createur: '',
            description: '',
            commentaires: '',
            ref: '',
            qte: '',
            libelle: '',
            nom: '',
            prenom: '',
            adresse1: '',
            adresse2: '',
            cp: '',
            ville: '',
            telephone: '',
            mail: '',
            idInterv: '',
            interventions: [
                {
                    id: 1,
                    type: 'Maintenance',
                    intervenant: 'Charles',
                    etat: 'En cours',
                    date_debut: '01/02/2018',
                    heure_debut: '14:53',
                    date_fin: '02/02/2018',
                    heure_fin: '09:30',
                    createur: 'Florian',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Bouif',
                            prenom: 'Martin',
                            adresse1: 'blablabla',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 2,
                    type: 'Installation',
                    intervenant: 'Charlotte',
                    etat: 'Terminé',
                    date_debut: '06/01/2018',
                    heure_debut: '09:30',
                    date_fin: '06/01/2018',
                    heure_fin: '09:30',
                    createur: 'Thomas',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Plouf',
                            prenom: 'Morgane',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 3,
                    type: 'Maintenance',
                    intervenant: 'Rose',
                    etat: 'A faire',
                    date_debut: '21/12/2017',
                    heure_debut: '09:30',
                    date_fin: '21/12/2017',
                    heure_fin: '09:30',
                    createur: 'Capucine',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Morgane',
                            prenom: 'Clara',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 4,
                    type: 'Maintenance',
                    intervenant: 'Louis',
                    etat: 'A faire',
                    date_debut: '15/02/2018',
                    heure_debut: '05:35',
                    date_fin: '15/02/2018',
                    heure_fin: '06:35',
                    createur: 'Tristan',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Judu',
                            prenom: 'Simon',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 5,
                    type: 'Désinstallation',
                    intervenant: 'Lea',
                    etat: 'En cours',
                    date_debut: '23/01/2018',
                    date_fin: '23/01/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Hugo',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Buehzuu',
                            prenom: 'Mathis',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 6,
                    type: 'Installation',
                    intervenant: 'Elodie',
                    etat: 'A faire',
                    date_debut: '28/01/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    date_fin: '28/01/2018',
                    createur: 'Capucine',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Matin',
                            prenom: 'Martin',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 7,
                    type: 'Installation',
                    intervenant: 'Lou',
                    etat: 'Terminé',
                    date_debut: '16/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    date_fin: '16/02/2018',
                    createur: 'Thomas',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Morgane',
                            prenom: 'Clara',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 8,
                    type: 'Maintenance',
                    intervenant: 'Emilie',
                    etat: 'En cours',
                    date_debut: '19/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    date_fin: '19/02/2018',
                    createur: 'Florian',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Buzeh',
                            prenom: 'Eva',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 9,
                    type: 'Désinstallation',
                    intervenant: 'Aurelien',
                    etat: 'Terminé',
                    date_debut: '05/01/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    date_fin: '05/01/2018',
                    createur: 'Anais',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Judu',
                            prenom: 'Simon',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 10,
                    type: 'Maintenance',
                    intervenant: 'Baptiste',
                    etat: 'Terminé',
                    date_debut: '21/11/2017',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    date_fin: '21/11/2017',
                    createur: 'Jade',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Franklin',
                            prenom: 'Benjamin',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 11,
                    type: 'Maintenance',
                    intervenant: 'Rose',
                    etat: 'A faire',
                    date_debut: '26/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    date_fin: '26/02/2018',
                    createur: 'Anais',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Buehzuu',
                            prenom: 'Mathis',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 12,
                    type: 'Installation',
                    intervenant: 'Lea',
                    etat: 'A faire',
                    date_debut: '26/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    date_fin: '26/02/2018',
                    createur: 'Tristan',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Lekj',
                            prenom: 'Lena',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 13,
                    type: 'Maintenance',
                    intervenant: 'Charles',
                    etat: 'A faire',
                    date_debut: '18/02/2018',
                    date_fin: '18/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Clementine',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Connor',
                            prenom: 'Sarah',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 14,
                    type: 'Maintenance',
                    intervenant: 'Emilie',
                    etat: 'En cours',
                    date_debut: '03/03/2018',
                    date_fin: '03/03/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Florian',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Hiei',
                            prenom: 'Thomas',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 15,
                    type: 'Désinstallation',
                    intervenant: 'Aurélien',
                    etat: 'A faire',
                    date_debut: '01/02/2018',
                    date_fin: '01/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Jade',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Plouf',
                            prenom: 'Morgane',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 16,
                    type: 'Maintenance',
                    intervenant: 'Charles',
                    etat: 'En cours',
                    date_debut: '06/02/2018',
                    date_fin: '06/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Louis',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Nbbie',
                            prenom: 'Quentin',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 17,
                    type: 'Installation',
                    intervenant: 'Louis',
                    etat: 'A faire',
                    date_debut: '14/02/2018',
                    date_fin: '14/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Lea',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Matin',
                            prenom: 'Martin',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 18,
                    type: 'Installation',
                    intervenant: 'Charlotte',
                    etat: 'A faire',
                    date_debut: '22/02/2018',
                    date_fin: '22/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Thomas',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Dujardin',
                            prenom: 'Jean',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 19,
                    type: 'Maintenance',
                    intervenant: 'Lou',
                    etat: 'Terminé',
                    date_debut: '02/01/2018',
                    date_fin: '02/01/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Capucine',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Sgye',
                            prenom: 'Mélanie',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                },
                {
                    id: 20,
                    type: 'Maintenance',
                    intervenant: 'Emilie',
                    etat: 'A faire',
                    date_debut: '06/02/2018',
                    date_fin: '06/02/2018',
                    heure_debut: '05:35',
                    heure_fin: '06:35',
                    createur: 'Lea',
                    description: 'Changer le machin de ce client qui a son ordi qui rame.',
                    commentaires: 'Tout est rentré dans l\'ordre',
                    produit: [
                        {
                            ref: 'Hizhai5896',
                            qte: 1,
                            libelle: 'Test'
                        }
                    ],
                    client: [
                        {
                            nom: 'Buzeh',
                            prenom: 'Eva',
                            adresse1: '26 rue de la Morandière',
                            adresse2: '',
                            cp: '50400',
                            ville: 'Trifouillis les Oies',
                            telephone: '0645825325',
                            mail: 'bouif.martin@gmail.com'
                        }
                    ]
                }
            ]
        },
        mounted(){
            store.commit('editTabSearch', this.interventions)
        }
    })


</script>
</body>

</html>


